---
// src/components/InvitacionBoda.astro
---

<section
  class="relative w-full h-screen flex flex-col items-center justify-center overflow-hidden"
>
  <!-- Fondo con imagen -->
  <div class="absolute inset-0 z-0">
    <img
      id="parallax-image"
      src="/imagenes/foto1.webp"
      alt="Sara y Moisés"
      class="w-full h-full object-cover animate-[zoom-in_2s_ease-out] transition-transform duration-300 ease-out will-change-transform"
    />
    <div class="absolute inset-0 bg-black/40 animate-[fade-in_1.5s_ease-out]">
    </div>
  </div>

  <!-- Partículas flotantes -->
  <div class="absolute inset-0 z-5 pointer-events-none">
    <div
      class="particle absolute top-[10%] left-[10%] w-1 h-1 bg-white/60 rounded-full shadow-[0_0_10px_rgba(255,255,255,0.8)] animate-[float_8s_ease-in-out_infinite]"
    >
    </div>
    <div
      class="particle absolute top-[15%] right-[15%] w-1 h-1 bg-white/60 rounded-full shadow-[0_0_10px_rgba(255,255,255,0.8)] animate-[float_10s_ease-in-out_infinite_0.3s]"
    >
    </div>
    <div
      class="particle absolute top-[25%] left-[20%] w-1 h-1 bg-white/60 rounded-full shadow-[0_0_10px_rgba(255,255,255,0.8)] animate-[float_7s_ease-in-out_infinite_0.6s]"
    >
    </div>
    <div
      class="particle absolute top-[30%] right-[25%] w-1 h-1 bg-white/60 rounded-full shadow-[0_0_10px_rgba(255,255,255,0.8)] animate-[float_9s_ease-in-out_infinite_0.9s]"
    >
    </div>
    <div
      class="particle absolute top-[35%] left-[50%] w-1 h-1 bg-white/60 rounded-full shadow-[0_0_10px_rgba(255,255,255,0.8)] animate-[float_11s_ease-in-out_infinite_1.2s]"
    >
    </div>
    <div
      class="particle absolute top-[40%] left-[15%] w-1 h-1 bg-white/60 rounded-full shadow-[0_0_10px_rgba(255,255,255,0.8)] animate-[float_8.5s_ease-in-out_infinite_1.5s]"
    >
    </div>
    <div
      class="particle absolute top-[45%] right-[10%] w-1 h-1 bg-white/60 rounded-full shadow-[0_0_10px_rgba(255,255,255,0.8)] animate-[float_10.5s_ease-in-out_infinite_1.8s]"
    >
    </div>
    <div
      class="particle absolute top-[50%] left-[30%] w-1 h-1 bg-white/60 rounded-full shadow-[0_0_10px_rgba(255,255,255,0.8)] animate-[float_9.5s_ease-in-out_infinite_2.1s]"
    >
    </div>
    <div
      class="particle absolute top-[55%] right-[35%] w-1 h-1 bg-white/60 rounded-full shadow-[0_0_10px_rgba(255,255,255,0.8)] animate-[float_7.5s_ease-in-out_infinite_2.4s]"
    >
    </div>
    <div
      class="particle absolute top-[60%] left-[45%] w-1 h-1 bg-white/60 rounded-full shadow-[0_0_10px_rgba(255,255,255,0.8)] animate-[float_8.8s_ease-in-out_infinite_2.7s]"
    >
    </div>
    <div
      class="particle absolute top-[65%] right-[20%] w-1 h-1 bg-white/60 rounded-full shadow-[0_0_10px_rgba(255,255,255,0.8)] animate-[float_10.2s_ease-in-out_infinite_3s]"
    >
    </div>
    <div
      class="particle absolute top-[70%] left-[25%] w-1 h-1 bg-white/60 rounded-full shadow-[0_0_10px_rgba(255,255,255,0.8)] animate-[float_9.8s_ease-in-out_infinite_3.3s]"
    >
    </div>
    <div
      class="particle absolute top-[75%] right-[40%] w-1 h-1 bg-white/60 rounded-full shadow-[0_0_10px_rgba(255,255,255,0.8)] animate-[float_7.8s_ease-in-out_infinite_3.6s]"
    >
    </div>
    <div
      class="particle absolute top-[80%] left-[35%] w-1 h-1 bg-white/60 rounded-full shadow-[0_0_10px_rgba(255,255,255,0.8)] animate-[float_11.5s_ease-in-out_infinite_3.9s]"
    >
    </div>
    <div
      class="particle absolute top-[85%] right-[30%] w-1 h-1 bg-white/60 rounded-full shadow-[0_0_10px_rgba(255,255,255,0.8)] animate-[float_8.2s_ease-in-out_infinite_4.2s]"
    >
    </div>
    <div
      class="particle absolute top-[20%] left-[40%] w-1 h-1 bg-white/60 rounded-full shadow-[0_0_10px_rgba(255,255,255,0.8)] animate-[float_9.2s_ease-in-out_infinite_4.5s]"
    >
    </div>
    <div
      class="particle absolute top-[48%] right-[50%] w-1 h-1 bg-white/60 rounded-full shadow-[0_0_10px_rgba(255,255,255,0.8)] animate-[float_10.8s_ease-in-out_infinite_4.8s]"
    >
    </div>
    <div
      class="particle absolute top-[62%] left-[60%] w-1 h-1 bg-white/60 rounded-full shadow-[0_0_10px_rgba(255,255,255,0.8)] animate-[float_7.2s_ease-in-out_infinite_5.1s]"
    >
    </div>
    <div
      class="particle absolute top-[38%] right-[45%] w-1 h-1 bg-white/60 rounded-full shadow-[0_0_10px_rgba(255,255,255,0.8)] animate-[float_11.2s_ease-in-out_infinite_5.4s]"
    >
    </div>
    <div
      class="particle absolute top-[72%] left-[55%] w-1 h-1 bg-white/60 rounded-full shadow-[0_0_10px_rgba(255,255,255,0.8)] animate-[float_8.6s_ease-in-out_infinite_5.7s]"
    >
    </div>
  </div>

  <!-- Contenido principal -->
  <div
    class="relative z-10 text-center px-6 flex flex-col items-center justify-center h-full"
  >
    <!-- Iniciales -->
    <div class="mb-8 animate-[scale-in_1.5s_ease-out_0.2s_both]">
      <div
        class="w-20 h-20 rounded-full border-2 border-white/80 flex items-center justify-center backdrop-blur-sm bg-white/10 animate-[glow_2.5s_ease-in-out_infinite]"
      >
        <span
          class="text-4xl text-white italic font-light animate-[fade-in_1s_ease-out_0.3s_both]"
          >SM</span
        >
      </div>
    </div>

    <!-- Subtítulo -->
    <p
      class="font-charm text-white/90 text-2xl md:text-base uppercase mb-12 font-light animate-[slide-down_1.5s_ease-out_0.2s_both]"
    >
      Nuestra Boda
    </p>

    <!-- Nombres -->
    <div class="my-12 space-y-4">
      <h1
        class="font-great-vibes text-6xl md:text-7xl lg:text-8xl text-white drop-shadow-[0_4px_20px_rgba(0,0,0,0.5)] leading-tight italic font-light animate-[slide-up_1.5s_ease-out_0.2s_both]"
      >
        Abigail
      </h1>

      <!-- Separador con & -->
      <div class="flex items-center justify-center gap-4 py-2">
        <div
          class="h-px w-12 md:w-16 bg-white/60 animate-[expand-right_1s_ease-out_0.2s_both] origin-right"
        >
        </div>
        <span
          class="font-great-vibes text-5xl md:text-5xl text-white/90 font-serif animate-[scale-in_1s_ease-out_0.2s_both]"
          >&</span
        >
        <div
          class="h-px w-12 md:w-16 bg-white/60 animate-[expand-left_1s_ease-out_0.2s_both] origin-left"
        >
        </div>
      </div>

      <h1
        class="font-great-vibes text-6xl md:text-7xl lg:text-8xl text-white drop-shadow-[0_4px_20px_rgba(0,0,0,0.5)] leading-tight italic font-light animate-[slide-up_1.5s_ease-out_0.2s_both]"
      >
        Fernando
      </h1>
    </div>

    <!-- Fecha -->
    <div
      class="mt-2 flex items-center gap-3 px-6 py-3 rounded-full border border-white/40 backdrop-blur-sm bg-white/10 animate-[slide-up_1.2s_ease-out_0.7s_both] relative overflow-hidden"
    >
      <!-- Efecto de brillo que se desliza -->
      <div
        class="absolute inset-0 bg-gradient-to-r from-transparent via-white/40 to-transparent animate-[shimmer_3s_ease-in-out_infinite] -translate-x-full"
      >
      </div>

      <svg
        class="w-5 h-5 text-white/80 animate-[fade-in-left_0.8s_ease-out_0.9s_both] relative z-10"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"
        ></path>
      </svg>

      <p
        class="text-white text-base md:text-lg tracking-wider font-light animate-[fade-in_0.6s_ease-out_0.9s_both] relative z-10"
      >
        24 de abril 2026
      </p>

      <svg
        class="w-5 h-5 text-white/80 animate-[fade-in-right_0.8s_ease-out_0.9s_both] relative z-10"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"
        ></path>
      </svg>
    </div>
  </div>

  <!-- Indicador de scroll -->
  <div
    class="absolute bottom-8 left-1/2 -translate-x-1/2 z-10 animate-[bounce-slow_2s_ease-in-out_infinite_1.2s]"
  >
    <svg
      class="w-6 h-6 text-white/60"
      fill="none"
      stroke="currentColor"
      viewBox="0 0 24 24"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="M19 14l-7 7m0 0l-7-7m7 7V3"></path>
    </svg>
  </div>
</section>

<style>
  @keyframes zoom-in {
    from {
      transform: scale(1.2);
      opacity: 0;
    }
    to {
      transform: scale(1);
      opacity: 1;
    }
  }

  @keyframes fade-in {
    from {
      opacity: 0;
      filter: blur(4px);
    }
    to {
      opacity: 1;
      filter: blur(0);
    }
  }

  @keyframes scale-in {
    from {
      transform: scale(0) rotate(-20deg);
      opacity: 0;
      filter: blur(8px);
    }
    to {
      transform: scale(1) rotate(0deg);
      opacity: 1;
      filter: blur(0);
    }
  }

  @keyframes slide-down {
    from {
      transform: translateY(-40px);
      opacity: 0;
      letter-spacing: 0.6em;
      filter: blur(8px);
    }
    to {
      transform: translateY(0);
      opacity: 1;
      letter-spacing: normal;
      filter: blur(0);
    }
  }

  @keyframes slide-up {
    from {
      transform: translateY(60px) scale(0.9);
      opacity: 0;
      filter: blur(10px);
    }
    to {
      transform: translateY(0) scale(1);
      opacity: 1;
      filter: blur(0);
    }
  }

  @keyframes expand-right {
    from {
      transform: scaleX(0);
      opacity: 0;
    }
    to {
      transform: scaleX(1);
      opacity: 1;
    }
  }

  @keyframes expand-left {
    from {
      transform: scaleX(0);
      opacity: 0;
    }
    to {
      transform: scaleX(1);
      opacity: 1;
    }
  }

  @keyframes fade-in-left {
    from {
      transform: translateX(-20px);
      opacity: 0;
      filter: blur(4px);
    }
    to {
      transform: translateX(0);
      opacity: 1;
      filter: blur(0);
    }
  }

  @keyframes fade-in-right {
    from {
      transform: translateX(20px);
      opacity: 0;
      filter: blur(4px);
    }
    to {
      transform: translateX(0);
      opacity: 1;
      filter: blur(0);
    }
  }

  @keyframes bounce-slow {
    0%,
    100% {
      transform: translateY(0);
      opacity: 0.6;
    }
    50% {
      transform: translateY(10px);
      opacity: 1;
    }
  }

  @keyframes float {
    0%,
    100% {
      transform: translate(0, 0) scale(1);
      opacity: 0.6;
    }
    25% {
      transform: translate(-20px, -30px) scale(1.2);
      opacity: 0.8;
    }
    50% {
      transform: translate(15px, 20px) scale(0.9);
      opacity: 0.4;
    }
    75% {
      transform: translate(-10px, 35px) scale(1.3);
      opacity: 0.7;
    }
  }

  @keyframes glow {
    0%,
    100% {
      box-shadow:
        0 0 15px rgba(255, 255, 255, 0.2),
        inset 0 0 10px rgba(255, 255, 255, 0.1);
    }
    50% {
      box-shadow:
        0 0 30px rgba(255, 255, 255, 0.5),
        inset 0 0 20px rgba(255, 255, 255, 0.2);
    }
  }

  /* Efecto de brillo deslizante para la fecha */
  @keyframes shimmer {
    0% {
      transform: translateX(-100%);
    }
    100% {
      transform: translateX(200%);
    }
  }
</style>

<script>
  // Efecto parallax suave en la imagen de fondo al hacer scroll
  const parallaxImage = document.getElementById("parallax-image");

  let currentScroll = 0;
  let targetScroll = 0;
  let animationId = null;

  // Función de interpolación suave (lerp)
  function lerp(start: number, end: number, factor: number): number {
    return start + (end - start) * factor;
  }

  // Actualización suave del parallax
  function smoothParallax() {
    // Interpolación suave hacia el valor objetivo
    currentScroll = lerp(currentScroll, targetScroll, 0.08);

    if (parallaxImage) {
      // Aplica el transform de forma suave con menor factor de movimiento
      parallaxImage.style.transform = `translateY(${currentScroll * 0.3}px) scale(1)`;
    }

    // Continúa la animación si aún hay diferencia
    if (Math.abs(targetScroll - currentScroll) > 0.5) {
      animationId = requestAnimationFrame(smoothParallax);
    } else {
      animationId = null;
    }
  }

  // Detectar scroll
  window.addEventListener(
    "scroll",
    () => {
      targetScroll = window.scrollY;

      // Inicia la animación solo si no está corriendo
      if (!animationId) {
        animationId = requestAnimationFrame(smoothParallax);
      }
    },
    { passive: true },
  );
</script>
